name: 'Check version'

on: [workflow_call]

jobs:
  verify-version:
    name: Verify VERSION has changed
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: technote-space/get-diff-action@v6
        id: verify-changed-version
        with:
          FILES: |
            VERSION
      - name: Cancel the build if VERSION has not changed
        if: !steps.verify-changed-version.outputs.diff
        uses: andymckay/cancel-action@0.3
